



代码如下 : 

```cpp
#include<algorithm>
#include<bitset>
#include<climits>
#include<cmath>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<iomanip>
#include<iostream>
#include<map>
#include<queue>
#include<set>
#include<string>
#include<unordered_map>
#include<unordered_set>
#include<vector>
#include<random>

using namespace std;

//#define int long long
typedef long long ll;
typedef long double ld;
typedef unsigned long long ull;

#define lson(x) (x << 1)
#define rson(x) (x << 1 | 1)

inline int lowbit(int x) {
    return x & (-x);
}

constexpr int maxn = 1e5 + 10;

constexpr int mod = 1e9 + 7;
constexpr ll inf = 1e18;
constexpr ld eps = 1e-7;
constexpr int intinf = 1e9 + 10;

int n, m, a[maxn], cnt, ans[maxn], V = 100000, f[maxn], vis[maxn], h[maxn];

struct node {
    int l, r, bl, op, id, val;
} q[maxn];

struct no {
    int l, r, id;
};

int d = sqrt(100000);

vector<no> Q[320];


bitset<100001> cur, rev;

bool cmp(node c1, node c2) {
    if (c1.bl == c2.bl) {
        if (c1.bl & 1) return c1.r < c2.r;
        return c1.r > c2.r;
    }
    return c1.bl < c2.bl;
}

void add(int x) {
    h[x]++;
    if (h[x] == 1) {
        cur.set(x);
        rev.set(V - x);
    }
}

void del(int x) {
    h[x]--;
    if (h[x] == 0) {
        cur.reset(x);
        rev.reset(V - x);
    }
}

void solve(int id) {
    cin >> n >> m;
    for (int i = 1; i <= n; i++)
        cin >> a[i];
    int B = sqrt(n);
    for (int i = 1; i <= m; i++) {
        int op, l, r, x;
        cin >> op >> l >> r >> x;
        if (op == 4 && x < d) {
            Q[x].push_back({ l,r,i });
        }
        else {
            q[++cnt] = { l,r,(l - 1) / B + 1,op,i,x };
        }
    }

    for (int i = 1; i < d; i++) {
        for (int j = 1; j <= n; j++) f[j] = 0;
        for (int j = 1; j <= V; j++) vis[j] = 0;
        for (int j = 1; j <= n; j++) {
            vis[a[j]] = j;
            f[j] = f[j - 1];
            if (a[j] * i <= V) f[j] = max(f[j], vis[a[j] * i]);
            if (a[j] % i == 0)
                f[j] = max(f[j], vis[a[j] / i]);
        }
        for (auto [l, r, id] : Q[i]) 
            if (f[r] >= l) ans[id] = 1;
    }

    sort(q + 1, q + cnt + 1, cmp);

    int l = 1, r = 0;
    for (int i = 1; i <= cnt; i++) {
        while (l > q[i].l) add(a[--l]);
        while (r < q[i].r) add(a[++r]);
        while (l < q[i].l) del(a[l++]);
        while (r > q[i].r) del(a[r--]);
        int id = q[i].id, op = q[i].op, x = q[i].val;
        bitset<100001> test;
        if (op == 1) {
            test = ((cur >> x) & cur);
            if (test.any()) ans[id] = 1;
        }
        if (op == 2) {
            test = ((cur << (V - x)) & rev);
            if (test.any()) ans[id] = 1;
        }
        if (op == 3) {
            for (int j = 1; j * j <= x; j++)
                if (x % j == 0) {
                    if (cur[j] && cur[x / j])
                        ans[id] = 1;
                }
        }
        if (op == 4) {
            for (int j = 1; j * x <= V; j++)
                if (cur[j] && cur[j * x]) ans[id] = 1;
        }
    }
    for (int i = 1; i <= n; i++)
        if (ans[i]) cout << "yuno\n";
        else cout << "yumi\n";
}

signed main() {
    ios::sync_with_stdio(false); cin.tie(nullptr);
    int T = 1;
    //cin >> T;
    for (int i = 1; i <= T; i++)
        solve(i);
    return 0;
}
```
