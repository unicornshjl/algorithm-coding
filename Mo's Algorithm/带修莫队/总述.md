原理方面不过多赘述

首先 , 在带修莫队中 , 块长定义为 $n^\frac{2}{3}$ 而总体时间复杂度为 $O(n^\frac{5}{3})$ 

我们将操作分为两类

操作 $1$ : 单点修改操作 我们需要记录 $pos$ 和 $val$ 信息分别表示修改位置和修改值 另外 , 还需要记录该修改操作的编号 $num$

操作 $2$ : 区间查询操作 我们需要记录 $l$ , $r$ , $bl$ , $br$ , $id$ , $t$ 信息分别表示查询区间的端点 , 左右端点的块号 , 询问编号以及时间戳,这里的时间戳实际上就是此时的 $num$ 表示这个询问之前已经有多少个修改操作了

然后 , 将操作 $2$ 按照如此下顺序排序 $:$

以 $bl$ 为第一关键字从小到大排序 , 以 $br$ 为第二关键字从小到大排序 , 以 $t$ 为第三关键字从小到大排序

依次遍历每个询问 窗口的滑动和上述过程相同

另外 我们需要建立一个时间戳窗口 $T$ 然后 $T$ 滑动到当前时间戳 滑动的过程中更新 让对应 $pos$ 的值和 $val$ 进行交换 同时如果 $pos$ 在当前的 $val$ 范围内 我们就需要另外对 $val$ 和 $a[pos]$ 的值进行修改

$update$ 内容根据题目决定
