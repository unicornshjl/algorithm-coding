重链剖分 ($HLD$) 用来将树拆分成若干重链以快速维护树上路径或子树问题 通常会和线段树结合
- 对任意一个节点 $u$ 我们要得到的信息有:

​		$fa$   ：父节点

​		$dep$ ：深度

​		$siz$ ： 子树大小

​		$son$ ：重儿子, $u$ 的子树中规模最大的儿子

​		$top$ ： 所在重链的头节点

​		$dfn$ ： $DFS$ 序的编号

​		$seg$ ： $seg[i]=j$ 表示 $dfn$ 序号为 $i$ 的节点,所对应的树上节点编号为 $j$

- $dfs1$ 的过程中, 我们要设置 $fa$  , $dep$ , $siz$  , $son$ ，此过程不分配 $dfn$ 序号
- $dfs2$ 的过程中,我们要设置 $top$ , $dfn$ , $seg$   遍历的方式是优先走重儿子 $son$ 再遍历剩下的轻儿子 依次分配 $dfn$ 序号 父节点和重儿子属于同一条链,具有相同的$top$ 而轻儿子会新开一条重链同时以自己为头
- 故,位于同一个重链上的所有节点的 $dfn$ 序都是连续的,同时位于同一棵子树上的节点其 $dfn$ 序号也是连续的
- 那么对子树进行操作事实上就是对线段树的单次操作 ；而对两点间的路径进行操作稍微麻烦，我们要不断向上找到多条重链,每条重链的信息都要利用线段树操作
- 对子树的操作复杂度为 $O(\log n)$  而 对路径的操作复杂度为 $O(\log^2 n)$
- 树链剖分还可以用来快速地求 $LCA$  ，让 $u$ 和 $v$ 不断向上跳跳到同一条重链，此时 $dep$ / $dfn$ 较小的点即为 $LCA$ 
